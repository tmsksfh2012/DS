데이터 설명
https://archive.ics.uci.edu/ml/datasets/Gas+Turbine+CO+and+NOx+Emission+Data+Set

수집 목적: studying flue gas emissions (가스 배출 연구 (CO & NOx 배출량) 목적 데이터)

AT: Ambient temperature (주변 온도) C 
AP: Ambient pressure (주변 압력)  mbar
AH: Ambient humidity (주변 습도)  %
AFDP: Air filter difference pressure (공기 필터 차압)  mbar
GTEP: Gas turbine exhaust pressure (가스 터빈 배기 압력)  mbar
TIT: Turbine inlet temperature (터빈 입구 온도)  C
TAT: Turbine after temperature (터빈 후 온도 (터빈 거치고 난 온도)) C
CDP: Compressor discharge pressure (압축기 토출 압력)  mbar
TEY: Turbine energy yield (터빈 에너지 생산량)  MWH

CO: Carbon monoxide (배출 가스 내 일산화탄소량)  mg/m3
(목표변수로도 가능하지만 NOX를 목표변수로 하고 CO는 제외)

NOX: Nitrogen oxides (배출 가스 내 질소 산화물량)  Nitrogen oxides
(목표변수로 선정)

----------------------------------------------------------------

예측 모델 생성과 설명 모델 생성 차이가
tr, ts set 적용하냐 전체 데이터 적용하냐의 차이인 것 같아서
코드 수정
+
예측 모델에서는 설명력이나 이런거 검증할 필요없이
예측 성능만 평가하면 될 것 같아서 내용 수정

----------------------------------------------------------------

132줄 회귀계수 부호와 양 해석은 ppt 하면서 같이 해주세요..!
확인하셨으면 주석 지워주시면 될 것 같습니당
+
240줄 회귀계수 의미 해석도 부탁드립니다!


----------------------------------------------------------------

예측 모델 성능평가에 상관계수 구하는게
실제 목표 변수값과 예측값의 상관계수를 구하는건데
이것도 그냥 성능 척도 중에 하나인 것 같습니다
(R 강의 선형 회귀 ppt 9번 슬라이드 참고)
+
MSE 구할 때 교차검증 하는데
이미 tr set 으로 생성한 예측모델 성능을 평가하는데
전체 데이터로 교차검증하는게 이상해서
tr set만으로 교차검증하도록 코드 수정

----------------------------------------------------------------

설명 모델에 테스트 집합이 필요없는 이유는
조금 다듬어 주세요
맞게 설명한건지 모르겠어서..


-----------------------------------------------------------

문제가 변수 선택에서

forward selection을 하면
모든 변수를 선택하고,
그래프를 보면 차이가 미미해지는 구간은 확실히 있는데

backward selection을 하면
변수를 제거할 게 없다고 나오네요

(나름 해결완료 밑에서 설명할게요)

+

다중 공선성이 높아서 데이터를 손보려했는데
다중 공선성 나타나는게 지금

AT  : 주변 온도 C
GTEP : 주변 압력 mbar
TIT : 터빈 입구 온도 C
TAT : 터빈 거치고 난 온도 C
TEY : 터빈 에너지 생산량 MWH
CDP : 압출기 토출 압력 mbar

AT- 상관계수 높은게 AP (-0.52), AH (-0.55)
GTEP - 상관계수 높은게 AFDP (0.88), TIT (0.90), TAT (-0.89), TEY (0.97), CDP (0.99)
TIT - 상관계수 높은게 AFDP (0.81), GTEP (0.90), TAT (-0.61), TEY (0.91), CDP (0.91)
TAT - 상관계수 높은게 AFDP (-0.79), GTEP (-0.89), TIT (-0.61), TEY (-0.86), CDP (-0.88)
TEY - 상관계수 높은게 AFDP (0.90), GTEP (0.99), TIT (0.91), TAT (-0.86), CDP (0.99)
CDP - 상관계수 높은게 AFDP (0.89), GTEP (0.99), TIT (0.91), TAT (-0.88), TEY (0.99)

이렇게 나와서

TAT 선택 / TIT 제거
TEY 선택 / GTEP, CDP 제거

해봤더니 다중 공선성 문제는 해결되고
성능은 조금 낮아집니다.

그런데 변수의 제거는 최대한 피하는 게 좋다고 하기도 하고
어느정도 의미가 겹치는 부분도 있는것 같아서
터빈 입구 온도랑 터빈 거치고 난 온도를 빼서 변수를 합쳐봤는데
갑자기 뜬금없이 CDP 와의 공선성이 매우 높게 나옵니다
(그냥 선택과 제거를 했을 때는 해결됬었음)

그리고 다중공선성이 높은데도
변수의 유의미성 측정하면 p-value가 엄청 낮게 나와서 유의미하고

변수 선택에서도 걸러내지 않는걸 보아
각 변수가 다중공선성을 띄어도
그 변수와 모델이 유의미하지 않은 것은 아닐 수 있음

==> 검색해서 찾아봤는데
다중공선성을 띄어도 꼭 유의미하지 않은 것은 아닐 수 있다네요


그래서 진행을 어떻게 할지 몰라서 고민하다가
최대한 자연스럽게 넘어가기 위해서 아래처럼 했습니다.
여기서 공선성을 해결해보려하면
코드를 많이 추가하든지 바꾸던지 해야될거같아서
이대로 가는게 좋을거같아요..
뭐가 더 나을지도 모르겠어서..

결론
그래서 다중 공선성 문제를 해결하고
예측 모델의 성능을 높이기 위해 변수 선택 stepwise selection을 진행했는데

forward selection 에서는 모든 변수를 선택했고
backward selection 에서는 제거할 변수가 없다고 나오며
설명 모델의 각각의 변수 유의미성에서도 각각이 매우 유의미하다고 판단되기 때문에

다중 공선성을 띄더라도 변수를 처리하기에는 그 변수가 각각 유의미하다고 판단하여
처리하지 않음

+

backward selection 에서는 제거할 변수가 없다고 나오기에
forward selection 에서 선택한 변수들의 순서를 통해
먼저 선택된 변수일수록 더 중요한 변수로 판단
==> 각 변수들의 p-value (유의미성)과 비교

stepwise selection 하면 하나 제거되고 하나는 선택 안됨


==>
미미하게나마 성능이 계속 좋아지거나 낮아지기 때문에
모두 선택하고, 모두 제거하지 않는 것으로 보임

그래프에서 변화량이 미미한 것을 찾고
성능이 비슷한 경우
복잡도가 낮은 모델이 더 좋은 모델이라고 할 수 있기 때문에
변화량이 미미해지는 구간을 잘라서
AT, AH, TIT, TEY, AFDP, AP, GTEP 를 선택하는 것으로 했습니다

코드에 주석으로 정리해놓았습니다











